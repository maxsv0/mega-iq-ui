<div class="p-3" *ngIf="isBrowser && customConfig">
  <!-- Social media share -->
  <share-buttons
    [include]="['facebook','twitter','linkedin','pinterest','reddit','vk','telegram','messenger','whatsapp','copy']"
    [exclude]="['google','mix','tumblr','linkedin','xing','print','messenger','sms','email']"
    [show]="7"
    [showText]="true"
    [autoSetMeta]="false"
    [theme]="'modern-dark'"
    [url]="customConfig.url"
    [title]="customConfig.title"
  ></share-buttons>
</div>
<!-- IQ Test Result -->
<div class="container" *ngIf="!isLoading">
  <div class="row">
    <div class="col-12">
      <div class="jumbotron">
        <!-- Title -->
        <h3>{{user.name || "Anonymous"}}
          <span
            i18n>passed</span> {{this.testTypes[this.testTypesKeys[test.type]].name}} {{test.finishDate | date:'fullDate'}}
        </h3>
        <div class="row mt-4">
          <div class="col-lg-6 py-5">
            <!-- User profile card -->
            <app-avatar *ngIf="user && user.isPublic" [user]="user"></app-avatar>

            <div class="card offset-1 col-10 my-4">
              <div class="card-body">
                <p>
                  <span i18n>Permanent IQ result link</span>: <a href="{{ hostName }}{{test.url}}">{{ hostName }}{{test.url}}</a>
                </p>
                <p>
                  <span i18n>Result code</span>: {{test.code}}
                </p>
              </div>
            </div>
          </div>
          <div class="col-lg-6">
            <div>
              <h2>{{this.testTypes[this.testTypesKeys[test.type]].name}} <span i18n>online</span></h2>
            </div>
            <h2 class="my-3"><span i18n>IQ Score</span>: {{test.points}}</h2>
            <div class="lead">
              <div *ngIf="test.info && test.info.questions">
                <span i18n>Total Questions</span>: {{test.info.questions}}
              </div>
              <div *ngIf="test.info && test.info.answersCorrect">
                <span i18n>Correct Answers</span>: {{test.info.answersCorrect}}
              </div>
            </div>

            <!-- Only for test owner -->
            <div class="py-3"
                 *ngIf="currentUser && user && user.uid === currentUser.uid">
              <button routerLink="/iqtest/review/{{test.code}}" class="btn btn-warning btn-block btn-lg">
                <fa-icon [icon]="['fas', 'sun']" class="mr-1"></fa-icon>
                <span i18n>Show Answers</span></button>
            </div>
            
            <!-- Chart js results -->
            <div *ngIf="this.test.type === testTypeEnum.MEGA_IQ || this.test.type === testTypeEnum.STANDARD_IQ">
              <canvas #myCanvas width="800" height="800"></canvas>
            </div>
            <!-- Standard results for practice test -->
            <div class="py-5"
                 *ngIf="!(this.test.type === testTypeEnum.MEGA_IQ || this.test.type === testTypeEnum.STANDARD_IQ)">
              <h1 [ngClass]="{ 'text-success': (test.points / testQuestionsCount) >= 0.75, 'text-danger': (test.points / testQuestionsCount) < 0.75}"><span i18n>IQ Score</span>: {{test.points}} / {{testQuestionsCount}}</h1>
            </div>
          </div>
          <div class="col" *ngIf="this.test.answerInfo">
            <canvas #myCanvasAnswers width="1000" height="400"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loader -->
<div class="container" *ngIf="isLoading">
  <div class="loader-placeholder">
    <div class="page-loader"></div>
  </div>
</div>

<!-- IQ tests collection -->
<section id="test-section" class="container" *ngIf="!isLoading && testTypesToShow">
  <div class="row">
    <div class="col-12 text-center">
      <h3 i18n>One more Mega-iq test?</h3>
    </div>

    <div class="col-sm-5 offset-sm-1" *ngFor="let item of testTypesToShow">
      <app-iq-test-promo [test]="item"></app-iq-test-promo>
    </div>
  </div>
</section>
